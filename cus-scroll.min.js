var CusScroll = function (a) { this.conatiner = document.querySelector(a); this.createBar(); this.ctn = this.conatiner.children[0]; this.setScroll(); this.bar = this.conatiner.querySelector(".cus-scroll-bar span"); this.barHeight = this.bar.offsetHeight; this.ctnHeight = this.ctn.offsetHeight; this.startY = 0; this.mousemoveHandle = this.move.bind(this); this.mouseupHandle = this.stop.bind(this); this.init() };
CusScroll.prototype.createBar = function () { var a = document.createElement("div"), b = document.createElement("span"); a.appendChild(b); a.classList.add("cus-scroll-bar"); this.conatiner.appendChild(a) }; CusScroll.prototype.setScroll = function () { this.ctn.classList.add("set-cus-scroll") }; CusScroll.prototype.init = function () { this.scrollEvent(); this.dragEvent() };
CusScroll.prototype.scrollEvent = function () { var a = this; this.ctn.addEventListener("scroll", function () { var b = parseInt(a.ctn.scrollTop); a.bar.style.top = b / ((a.ctn.scrollHeight - a.ctnHeight) / 100) + "%" }, !1) }; CusScroll.prototype.dragEvent = function () { this.bar.addEventListener("mousedown", this.dragStart.bind(this)) }; CusScroll.prototype.dragStart = function (a) { a.preventDefault(); this.startY = a.clientY - this.bar.offsetTop; window.addEventListener("mousemove", this.mousemoveHandle); window.addEventListener("mouseup", this.mouseupHandle) };
CusScroll.prototype.move = function (a) { var b = this.ctn.scrollHeight - this.ctnHeight; a = a.clientY - this.startY; 0 >= a || a > this.ctnHeight - this.barHeight || (this.bar.style.top = a + "px", this.ctn.scrollTo(0, b * parseInt(a / (this.ctnHeight - this.barHeight) * 100) / 100)) }; CusScroll.prototype.stop = function () { window.removeEventListener("mousemove", this.mousemoveHandle); window.removeEventListener("mouseup", this.mouseupHandle) };
